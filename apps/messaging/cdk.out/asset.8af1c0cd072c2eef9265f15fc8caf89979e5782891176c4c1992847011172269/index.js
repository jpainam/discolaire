"use strict";var a=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var r=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var l=(s,e)=>{for(var o in e)a(s,o,{get:e[o],enumerable:!0})},d=(s,e,o,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of r(e))!p.call(s,n)&&n!==o&&a(s,n,{get:()=>e[n],enumerable:!(i=c(e,n))||i.enumerable});return s};var m=s=>d(a({},"__esModule",{value:!0}),s);var S={};l(S,{handler:()=>f});module.exports=m(S);var f=async s=>{for(let e of s.Records){let o;try{o=JSON.parse(e.Sns.Message)}catch{console.error("[notifications] Failed to parse SNS message:",e.Sns.Message);continue}switch(o.notificationType){case"Bounce":{let i=o.bounce,n=i.bouncedRecipients.map(t=>t.emailAddress);console.log(`[notifications] Bounce (${i.bounceType}/${i.bounceSubType}) for: ${n.join(", ")}`),i.bounceType==="Permanent"?console.warn("[notifications] TODO: suppress hard-bounce addresses:",n):console.warn("[notifications] Transient bounce, no action taken:",n);break}case"Complaint":{let i=o.complaint,n=i.complainedRecipients.map(t=>t.emailAddress);console.log(`[notifications] Complaint (${i.complaintFeedbackType??"unknown"}) for: ${n.join(", ")}`),console.warn("[notifications] TODO: suppress complaint addresses:",n);break}case"Delivery":{console.log(`[notifications] Delivery confirmed for messageId=${o.mail.messageId}`);break}default:console.warn("[notifications] Unknown notification type:",o)}}};0&&(module.exports={handler});
